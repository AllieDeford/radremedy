{% extends 'base.html' %}

{% block title %}Rad Remedy - Home{% endblock %}
{% block head_text %}Welcome!{% endblock %}
{% block head_blurb %}This is where we would a nice blurb about what RAD is, who 
            should use it, and what they might use it for. Also, this is a good 
            spot for a short version of our mission statement!{% endblock %}

{% block content %}
<div class="container">
<div class="row">
	<h3 class="text-uppercase">Search RAD's Database:</h3>
	<div class="home-search text-center">
		
		<form class="search" role="search" action="{{ url_for('remedy.resource_search') }}" method="GET">
	        <div class="form-group ">
	          	<input type="text" name="search" class="form-control form-remedy" 
	          	placeholder="Search providers" />
	        </div>
	        <div class="form-group">
	          	<label for="search-addr">near</label>

				<input type="text" name="addr" id="search-addr" class="form-control form-remedy" placeholder="Address" />
			</div>
			<div class="form-group"> 
				<label for="dist">within</label>
				<select id="dist" name="dist" class="form-control form-remedy" >
					<option value="-1">Anywhere</option>
					<option value="5">5 mi</option>
					<option value="10">10 mi</option>
					<option value="25" selected="selected">25 mi</option>
					<option value="50">50 mi</option>
					<option value="100">100 mi</option>
				</select>
				<input type="hidden" name="lat" id="search-lat" />
				<input type="hidden" name="long" id="search-long" />
	        </div>
	        <a class="sr-only sr-only-focusable" href="#content">Sumit button</a><button type="submit" class="btn search home-search-btn">
	        	&nbsp;
	        </button>
	      </form>
	</div>

</div>
<div class="row recently-added">
	<h3 class="text-uppercase">Recently Added To RAD</h3>
	<div class="sm-col-2">
		<img alt="left arrow" class="arrow-style flip-img" src="static/img/arrow.png">
	</div>
	<div class="sm-col-10">
	{% for r in recently_added %}
		<div class="recently-added-block">
				<div class="recently-added-date">Added: 5/10/15</div>
				<div class="recently-added-category">Category: Resource</div>
				<div class="recently-added-text"><a href="{{ url_for('remedy.resource', resource_id=r.id) }}">{{ r.name }}</a></div>
		</div>
	{% endfor %}
	</div>
	<div class="sm-col-2">
		<img alt="right arrow" class="arrow-style" src="static/img/arrow.png">
	</div>
</div>
</div>

{% endblock %}

{% block scripts %}
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;libraries=places"></script>
<script type="text/javascript">
	$(function () {
	  addrAutoComplete = new google.maps.places.Autocomplete(
	    (document.getElementById('search-addr')),
	    {
	      types: ['(regions)']
	    }
	  );
	  google.maps.event.addListener(addrAutoComplete, 'place_changed', function() {
	  	var place = addrAutoComplete.getPlace();

	  	if( place.geometry && place.geometry.location ) {
	  		$("#search-lat").val(place.geometry.location.lat().toFixed(5));
	  		$("#search-long").val(place.geometry.location.lng().toFixed(5));
	  	}
	  });
	});
</script>
{% endblock %}
